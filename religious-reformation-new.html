<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>종교개혁이 일어나다</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: #F5F5F7;
            color: #1D1D1F;
            line-height: 1.7;
            scroll-behavior: smooth;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 100px 20px;
            margin-bottom: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .header h1 {
            font-size: 4rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
        }

        .header p {
            font-size: 1.8rem;
            font-weight: 400;
            opacity: 0.9;
        }

        section {
            background-color: #FFFFFF;
            border-radius: 25px;
            padding: 50px;
            margin-bottom: 40px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        section:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1D1D1F;
            margin-bottom: 30px;
            border-left: 8px solid #007AFF;
            padding-left: 20px;
        }

        .subsection-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #007AFF;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #E8F4FD;
        }

        p, ul, li {
            font-size: 1.3rem;
            color: #666666;
            margin-bottom: 20px;
            line-height: 1.8;
        }

        .interactive-element {
            cursor: pointer;
            padding: 20px;
            background: linear-gradient(135deg, #f1f8ff, #e8f4fd);
            border: 2px solid transparent;
            border-radius: 18px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 600;
            font-size: 1.2rem;
            margin: 25px 0;
        }
        
        .interactive-element:hover {
            background: linear-gradient(135deg, #e8f4fd, #d4edda);
            border-color: #007AFF;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 122, 255, 0.15);
        }

        .timeline {
            display: flex;
            flex-direction: column;
            gap: 25px;
            padding-left: 40px;
            border-left: 4px solid #007AFF;
            margin: 30px 0;
        }
        
        .timeline-item {
            position: relative;
            padding: 25px;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        
        .timeline-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -48px;
            top: 30px;
            width: 20px;
            height: 20px;
            background-color: #007AFF;
            border-radius: 50%;
            border: 5px solid #FFFFFF;
            box-shadow: 0 0 0 3px #007AFF;
        }
        
        .timeline-year {
            font-size: 1.4rem;
            font-weight: 700;
            color: #007AFF;
            margin-bottom: 8px;
        }
        
        .timeline-content h4 {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1D1D1F;
        }

        .reform-leaders {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .leader-card {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .leader-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .leader-name {
            font-size: 1.6rem;
            font-weight: 700;
            color: #007AFF;
            margin-bottom: 15px;
        }

        .leader-info {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 10px;
        }

        .quiz-section {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border: 3px solid #007AFF;
            border-radius: 25px;
            padding: 40px;
        }

        .quiz-progress {
            margin-bottom: 30px;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 8px;
            border-radius: 4px;
            margin-bottom: 15px;
        }

        .progress-fill {
            background: #4CAF50;
            height: 100%;
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            color: white;
            text-align: center;
            font-size: 1.1rem;
        }

        .question-container {
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 25px;
            color: #1565c0;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 20px;
            background-color: #FFFFFF;
            border: 2px solid #E0E0E0;
            border-radius: 18px;
            cursor: pointer;
            font-size: 1.15rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .option:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
            border-color: #007AFF;
        }

        .option.correct {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .option.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .option.disabled {
            pointer-events: none;
        }

        .feedback {
            display: none;
            margin-top: 25px;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .feedback-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .feedback-explanation {
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .quiz-button {
            background: linear-gradient(135deg, #007AFF, #0056b3);
            color: white;
            padding: 18px 35px;
            border-radius: 20px;
            border: none;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            margin-top: 25px;
        }

        .quiz-button:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 122, 255, 0.3);
        }

        .quiz-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }

        .final-results {
            display: none;
            background: white;
            color: #333;
            padding: 40px;
            border-radius: 20px;
            margin-top: 30px;
        }

        .results-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 30px;
            color: #007AFF;
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1.1rem;
            color: #666;
        }

        .final-message {
            text-align: center;
            font-size: 1.4rem;
            font-weight: 600;
            padding: 25px;
            background: #e3f2fd;
            border-radius: 15px;
            margin-bottom: 25px;
        }

        .popup {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: #FFFFFF;
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
            z-index: 1000;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .popup.visible {
            display: block;
        }

        .popup h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #007AFF;
            margin-bottom: 20px;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 999;
        }

        .overlay.visible {
            display: block;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 3rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>종교개혁이 일어나다</h1>
        <p>세상을 바꾼 거대한 종교적 변화의 시작</p>
    </div>

    <section>
        <h2 class="section-title">부패한 교회와 면벌부 판매</h2>
        <p>16세기 초, 교황과 성직자들은 막대한 부를 쌓으며 세속화되어 갔습니다. 특히 교황 레오 10세는 성 베드로 대성당 건축 비용을 마련하기 위해 <strong>면벌부(면죄부)</strong>를 대량으로 판매했습니다.</p>
        
        <div class="interactive-element" onclick="showPopup('indulgence-popup')">
            면벌부란 무엇인가? 자세히 알아보기
        </div>
        
        <p><strong>테첼의 면벌부 선전:</strong> "돈이 금고에 떨어져 짤랑거리는 소리와 함께 연옥의 영혼이 튀어나온다!" 이런 과장 선전으로 사람들에게 회개 없이도 돈만 내면 죄가 사해진다고 속였습니다.</p>
        
        <h3 class="subsection-title">교회 부패의 실상</h3>
        <p>당시 가톨릭 교회는 성직 매매, 교회 재산의 사유화, 사치스러운 생활 등으로 본래의 종교적 사명을 잃어가고 있었습니다. 많은 성직자들이 라틴어 성경조차 제대로 읽지 못했으며, 미사는 형식적으로 진행되었습니다.</p>
    </section>

    <section>
        <h2 class="section-title">마르틴 루터의 등장과 95개조 반박문</h2>
        <p>1517년 10월 31일, 독일 비텐베르크 대학의 신학 교수 마르틴 루터는 교회의 면벌부 판매에 분노하여 <strong>95개조 반박문</strong>을 성당 문에 게시했습니다.</p>
        
        <div class="interactive-element" onclick="showPopup('luther-theology-popup')">
            루터의 핵심 주장 알아보기
        </div>

        <p>이 반박문은 인쇄술의 발달로 2주 만에 독일 전역에, 1달 만에 유럽 전체에 퍼져나가며 종교개혁의 도화선이 되었습니다.</p>

        <h3 class="subsection-title">루터의 신학적 혁신</h3>
        <p>루터는 단순히 면벌부만 비판한 것이 아니라, 가톨릭 교회의 근본적인 교리에 도전했습니다. 그는 교황의 권위보다 성경의 권위를 우선시했으며, 모든 신자가 제사장이라는 혁신적 사상을 제시했습니다.</p>
    </section>

    <section>
        <h2 class="section-title">종교개혁의 확산</h2>
        
        <h3 class="subsection-title">아우크스부르크 화의 (1555)</h3>
        <p>1555년 독일에서 체결된 <strong>아우크스부르크 화의</strong>는 종교개혁의 법적 승인이라는 역사적 의미를 갖습니다.</p>
        
        <div class="interactive-element" onclick="showPopup('augsburg-popup')">
            아우크스부르크 화의의 핵심 내용 알아보기
        </div>
        
        <p><strong>"Cuius regio, eius religio"</strong> (각자의 나라에 자신의 종교)라는 원칙을 통해 신성로마제국 내에서 가톨릭과 루터파의 공존을 법적으로 보장했습니다. 이로써 루터파는 공식적으로 인정받게 되었고, 각 영주는 자신의 영토에서 종교를 선택할 권리를 얻었습니다.</p>
        
        <h3 class="subsection-title">주요 종교개혁자들</h3>
        <div class="reform-leaders">
            <div class="leader-card">
                <div class="leader-name">장 칼뱅 (1509-1564)</div>
                <div class="leader-info">프랑스 출신 종교개혁자</div>
                <div class="leader-info">스위스 제네바에서 활동</div>
                <div class="leader-info">예정설 주장, 개혁교회 창설</div>
                <p>칼뱅은 하나님의 절대주권과 예정설을 강조하며 제네바를 '지상의 하나님 나라'로 만들려 했습니다.</p>
            </div>
            
            <div class="leader-card">
                <div class="leader-name">헨리 8세 (1491-1547)</div>
                <div class="leader-info">영국 왕</div>
                <div class="leader-info">영국 국교회 창설</div>
                <div class="leader-info">수장령 발표 (1534)</div>
                <p>왕비와의 이혼 문제로 교황과 갈등하며 영국 교회를 로마에서 독립시켰습니다.</p>
            </div>
            
            <div class="leader-card">
                <div class="leader-name">울리히 츠빙글리 (1484-1531)</div>
                <div class="leader-info">스위스 종교개혁자</div>
                <div class="leader-info">취리히에서 활동</div>
                <div class="leader-info">인문주의적 개혁 추진</div>
                <p>루터보다 더 급진적인 개혁을 추진하며 스위스 종교개혁의 기초를 닦았습니다.</p>
            </div>
        </div>
    </section>

    <section>
        <h2 class="section-title">종교개혁 주요 사건 연표</h2>
        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-year">1517년</div>
                <div class="timeline-content">
                    <h4>95개조 반박문 발표</h4>
                    <p>마르틴 루터가 비텐베르크 성당 문에 면벌부를 비판하는 95개조 반박문을 게시</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">1521년</div>
                <div class="timeline-content">
                    <h4>보름스 제국의회</h4>
                    <p>루터가 자신의 주장을 취소하라는 압박을 받았으나 거부. "나는 여기 서 있다"는 명언을 남김</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">1534년</div>
                <div class="timeline-content">
                    <h4>영국 수장령 발표</h4>
                    <p>헨리 8세가 자신을 영국 교회의 수장으로 선언하며 로마 교황청에서 독립</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">1555년</div>
                <div class="timeline-content">
                    <h4>아우크스부르크 화의</h4>
                    <p>각자의 나라에 자신의 종교 원칙으로 루터파 공식 인정 (cuius regio, eius religio)</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">1618년</div>
                <div class="timeline-content">
                    <h4>30년 전쟁 시작</h4>
                    <p>프라하 창문투척사건으로 보헤미아 프로테스탄트들의 반란 시작</p>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">1648년</div>
                <div class="timeline-content">
                    <h4>베스트팔렌 조약</h4>
                    <p>30년 전쟁 종료, 근대 주권국가 체제와 종교적 관용 확립</p>
                </div>
            </div>
        </div>
    </section>

    <section class="quiz-section">
        <h2 class="section-title" style="color: white;">형성 평가</h2>
        <p style="color: white; font-size: 1.2rem;">수업 내용을 얼마나 잘 이해했는지 확인해 보세요!</p>

        <div class="quiz-progress">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text">
                <span id="current-question">1</span> / <span id="total-questions">8</span> 문제
            </div>
        </div>

        <div class="question-container" id="question-container">
            <!-- 질문이 여기에 표시됩니다 -->
        </div>

        <div class="feedback" id="feedback">
            <div class="feedback-text" id="feedback-text"></div>
            <div class="feedback-explanation" id="feedback-explanation"></div>
        </div>

        <button class="quiz-button" id="next-btn" onclick="nextQuestion()">다음 문제</button>
        <button class="quiz-button" id="finish-btn" onclick="showResults()">결과 보기</button>

        <div class="final-results" id="final-results">
            <h3 class="results-title">최종 결과</h3>
            
            <div class="results-stats">
                <div class="stat-card">
                    <div class="stat-number" style="color: #28a745;" id="final-score">0/8</div>
                    <div class="stat-label">점수</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #007AFF;" id="final-percentage">0%</div>
                    <div class="stat-label">정답률</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #17a2b8;" id="final-correct">0</div>
                    <div class="stat-label">정답 수</div>
                </div>
            </div>

            <div class="final-message" id="final-message"></div>

            <button class="quiz-button" onclick="resetQuiz()">다시 도전하기</button>
        </div>
    </section>
</div>

<!-- 팝업들 -->
<div class="overlay" id="overlay" onclick="closePopup()"></div>

<div class="popup" id="indulgence-popup">
    <span class="close-btn" onclick="closePopup()">&times;</span>
    <h3>면벌부란 무엇인가?</h3>
    <p><strong>면벌부(면죄부)</strong>는 교회에서 돈을 받고 죄를 사해준다는 증명서였습니다.</p>
    <ul>
        <li><strong>배경:</strong> 교황 레오 10세가 성 베드로 대성당 건축 비용 마련을 위해 본격 판매</li>
        <li><strong>판매 방식:</strong> 돈만 내면 회개나 참회 없이도 죄가 사해진다고 주장</li>
        <li><strong>문제점:</strong> 이미 죽은 사람을 위해서도 면벌부를 살 수 있다고 함</li>
        <li><strong>결과:</strong> 많은 사람들이 속아서 거액을 지불, 교회 부패의 상징</li>
        <li><strong>테첼의 구호:</strong> "동전이 헌금함에 떨어져 딸랑거리자마자 죽은 자의 영혼이 연옥에서 튀어나온다"</li>
    </ul>
</div>

<div class="popup" id="luther-theology-popup">
    <span class="close-btn" onclick="closePopup()">&times;</span>
    <h3>루터의 핵심 주장</h3>
    <ul>
        <li><strong>의인설 (오직 믿음):</strong> 사람은 선행이 아닌 오직 믿음으로만 구원받는다</li>
        <li><strong>성서지상주의:</strong> 성경만이 신앙의 유일한 권위이며, 교황이나 교회 전통보다 위에 있다</li>
        <li><strong>만인제사장설:</strong> 모든 신자는 제사장이므로 교회나 성직자의 중개 없이 직접 하나님께 나아갈 수 있다</li>
        <li><strong>참된 회개:</strong> 회개는 일생에 걸쳐 지속되어야 하며, 돈으로 살 수 있는 것이 아니다</li>
        <li><strong>교황 권위 부정:</strong> 교황은 하나님의 대리자가 아니며, 면벌부를 통해 영혼을 구원할 수 없다</li>
        <li><strong>독일어 성경 번역:</strong> 일반 백성들도 성경을 읽을 수 있도록 라틴어에서 독일어로 번역</li>
    </ul>
</div>

<div class="popup" id="augsburg-popup">
    <span class="close-btn" onclick="closePopup()">&times;</span>
    <h3>아우크스부르크 화의 (1555)</h3>
    <p><strong>종교개혁의 법적 승인을 의미하는 역사적 협정</strong></p>
    <ul>
        <li><strong>배경:</strong> 루터파와 가톨릭 간의 종교적 갈등을 법적으로 해결할 필요성</li>
        <li><strong>핵심 원칙:</strong> "Cuius regio, eius religio" (각자의 나라에 자신의 종교)</li>
        <li><strong>주요 내용:</strong>
            <ul>
                <li>신성로마제국 내에서 루터파를 공식 인정</li>
                <li>각 영주가 자신의 영토에서 종교 선택권 보장</li>
                <li>가톨릭과 루터파의 법적 공존 승인</li>
            </ul>
        </li>
        <li><strong>한계:</strong> 백성들은 영주의 종교를 따라야 했음 (개인의 종교 자유는 제한)</li>
        <li><strong>역사적 의의:</strong> 종교 관용의 첫 걸음, 근대 종교 자유 사상의 출발점</li>
    </ul>
</div>

<script>
var questions = [
    {
        text: "1. 교황 레오 10세가 성 베드로 대성당 건축 비용을 마련하기 위해 판매한 것은?",
        options: ["십자군 원정 모금함", "면벌부(면죄부)", "교황의 초상화", "성유물"],
        correct: 1,
        explanation: "교황 레오 10세는 성 베드로 대성당 건축 비용을 마련하기 위해 면벌부를 대량 판매했습니다."
    },
    {
        text: "2. 마르틴 루터가 1517년 10월 31일에 발표한 문서는?",
        options: ["종교개혁선언문", "95개조 반박문", "독일어 성경", "교황 비판서"],
        correct: 1,
        explanation: "루터는 1517년 10월 31일 비텐베르크 성당 문에 면벌부를 비판하는 95개조 반박문을 게시했습니다."
    },
    {
        text: "3. 루터의 핵심 주장이 아닌 것은?",
        options: ["의인설 (오직 믿음으로)", "성서지상주의", "교황 무오설", "만인제사장설"],
        correct: 2,
        explanation: "교황 무오설은 가톨릭 교회의 교리입니다. 루터는 오히려 교황의 권위를 부정했습니다."
    },
    {
        text: "4. 영국에서 종교개혁을 단행하고 국교회를 성립시킨 왕은?",
        options: ["찰스 1세", "헨리 8세", "엘리자베스 1세", "제임스 1세"],
        correct: 1,
        explanation: "헨리 8세는 왕비와의 이혼 문제로 수장령을 발표하여 영국 국교회를 성립시켰습니다."
    },
    {
        text: "5. 스위스 제네바에서 활동하며 예정설을 주장한 종교개혁자는?",
        options: ["마르틴 루터", "장 칼뱅", "울리히 츠빙글리", "존 녹스"],
        correct: 1,
        explanation: "장 칼뱅은 스위스 제네바에서 활동하며 하나님의 절대주권과 예정설을 강조했습니다."
    },
    {
        text: "6. 30년 전쟁의 시작이 된 사건은?",
        options: ["프라하 창문투척사건", "아우크스부르크 화의", "95개조 반박문 발표", "백산 전투"],
        correct: 0,
        explanation: "1618년 5월 23일 프라하에서 프로테스탄트 귀족들이 황제의 관리들을 창문으로 던진 사건이 30년 전쟁의 시작이 되었습니다."
    },
    {
        text: "7. 베스트팔렌 조약(1648)의 의의로 옳지 않은 것은?",
        options: ["근대 주권국가 체제 확립", "종교적 관용 확립", "교황권의 강화", "국제법의 기초 마련"],
        correct: 2,
        explanation: "베스트팔렌 조약은 오히려 교황권을 약화시키고 각국의 주권을 강화했습니다."
    },
    {
        text: "8. 면벌부 판매를 선전한 테첼의 유명한 구호는?",
        options: ["믿음으로만 구원받는다", "돈이 금고에 떨어져 짤랑거리는 소리와 함께 연옥의 영혼이 튀어나온다", "성경만이 유일한 권위다", "모든 신자는 제사장이다"],
        correct: 1,
        explanation: "테첼은 '돈이 금고에 떨어져 짤랑거리는 소리와 함께 연옥의 영혼이 튀어나온다'는 과장된 구호로 면벌부를 선전했습니다."
    }
];

var currentQ = 0;
var score = 0;
var answers = [];

function startQuiz() {
    currentQ = 0;
    score = 0;
    answers = [];
    document.getElementById('final-results').style.display = 'none';
    showQuestion();
}

function showQuestion() {
    var container = document.getElementById('question-container');
    var question = questions[currentQ];
    
    var html = '<div class="question-text">' + question.text + '</div>';
    html += '<div class="options">';
    
    for (var i = 0; i < question.options.length; i++) {
        html += '<div class="option" onclick="selectAnswer(' + i + ')">' + question.options[i] + '</div>';
    }
    
    html += '</div>';
    container.innerHTML = html;
    
    updateProgress();
    hideFeedback();
    hideButtons();
}

function selectAnswer(index) {
    var options = document.querySelectorAll('.option');
    var question = questions[currentQ];
    
    for (var i = 0; i < options.length; i++) {
        options[i].classList.add('disabled');
    }
    
    answers[currentQ] = index;
    var isCorrect = index === question.correct;
    
    if (isCorrect) {
        score++;
        options[index].classList.add('correct');
    } else {
        options[index].classList.add('incorrect');
        options[question.correct].classList.add('correct');
    }
    
    showFeedback(isCorrect, question.explanation);
    showNextButton();
}

function showFeedback(correct, explanation) {
    var feedback = document.getElementById('feedback');
    var text = document.getElementById('feedback-text');
    var exp = document.getElementById('feedback-explanation');
    
    if (correct) {
        feedback.style.background = '#d4edda';
        feedback.style.border = '2px solid #28a745';
        text.style.color = '#155724';
        text.textContent = '정답입니다!';
    } else {
        feedback.style.background = '#f8d7da';
        feedback.style.border = '2px solid #dc3545';
        text.style.color = '#721c24';
        text.textContent = '틀렸습니다.';
    }
    
    exp.textContent = explanation;
    feedback.style.display = 'block';
}

function hideFeedback() {
    document.getElementById('feedback').style.display = 'none';
}

function showNextButton() {
    if (currentQ < questions.length - 1) {
        document.getElementById('next-btn').style.display = 'block';
        document.getElementById('finish-btn').style.display = 'none';
    } else {
        document.getElementById('next-btn').style.display = 'none';
        document.getElementById('finish-btn').style.display = 'block';
    }
}

function hideButtons() {
    document.getElementById('next-btn').style.display = 'none';
    document.getElementById('finish-btn').style.display = 'none';
}

function nextQuestion() {
    currentQ++;
    showQuestion();
}

function updateProgress() {
    var progress = (currentQ / questions.length) * 100;
    document.getElementById('progress-fill').style.width = progress + '%';
    document.getElementById('current-question').textContent = currentQ + 1;
    document.getElementById('total-questions').textContent = questions.length;
}

function showResults() {
    var percentage = Math.round((score / questions.length) * 100);
    
    document.getElementById('final-score').textContent = score + '/' + questions.length;
    document.getElementById('final-percentage').textContent = percentage + '%';
    document.getElementById('final-correct').textContent = score;
    
    var message = '';
    if (percentage >= 90) {
        message = '훌륭합니다! 종교개혁을 완벽히 이해했네요!';
    } else if (percentage >= 70) {
        message = '잘했습니다! 종교개혁의 핵심을 잘 파악했어요!';
    } else if (percentage >= 50) {
        message = '괜찮아요! 조금 더 복습하면 완벽해질 거예요!';
    } else {
        message = '다시 한번 내용을 정리하고 도전해보세요!';
    }
    
    document.getElementById('final-message').textContent = message;
    document.getElementById('final-results').style.display = 'block';
}

function resetQuiz() {
    startQuiz();
}

function showPopup(id) {
    var popup = document.getElementById(id);
    var overlay = document.getElementById('overlay');
    
    if (popup && overlay) {
        overlay.classList.add('visible');
        popup.classList.add('visible');
    } else {
        console.error('Popup or overlay not found: ' + id);
    }
}

function closePopup() {
    var overlay = document.getElementById('overlay');
    if (overlay) {
        overlay.classList.remove('visible');
    }
    
    var popups = document.querySelectorAll('.popup');
    for (var i = 0; i < popups.length; i++) {
        popups[i].classList.remove('visible');
    }
}

document.addEventListener('DOMContentLoaded', function() {
    startQuiz();
});
</script>

</body>
</html>